{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTP - Profil & Projets</title>
    <link rel="stylesheet" href="{% static 'core/css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body style="overflow: hidden;"> 
    <!-- Landing Page Overlay -->
    <div id="landing-page" class="landing-container" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 2000; background-color: var(--bg-color); cursor: pointer;">
        <div class="content" style="text-align: center;">
            <img src="{% static 'core/images/logo_no_bg.png' %}" alt="BTP Logo" class="logo" id="logo-image" style="width: 500px; height: auto; max-width: 80vw; margin-bottom: 2rem;">
            <h1 class="welcome-text" style="font-size: 3rem; color: var(--primary-color); margin: 0;">Gourmelon BTP</h1>
        </div>
    </div>

    <!-- Loading Screen Overlay -->
    <div id="loading-screen" class="loading-screen">
        <div class="pyramid-loader">
            <div class="wrapper">
                <span class="side side1"></span>
                <span class="side side2"></span>
                <span class="side side3"></span>
                <span class="side side4"></span>
                <span class="shadow"></span>
            </div>
        </div>
        <p style="margin-top: 2rem; font-size: 1.2rem;">Chargement...</p>
    </div>

    <!-- Main Content (Initially Hidden) -->
    <div id="main-content" style="display: none;">
    <nav class="navbar">
        <div class="nav-logo">
            <a href="{% url 'index' %}">
                <img src="{% static 'core/images/logo.jpg' %}" alt="BTP Logo">
            </a>
        </div>
        <div class="nav-links" style="display: flex; align-items: center;">
            <a href="#profil">Profil</a>
            <a href="#portfolio">Projets</a>
            <a href="#services">Services</a>
            
            <!-- Dark Mode Toggle -->
            <div class="theme-switch-wrapper" style="margin-left: 2rem;">
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider round"></div>
                </label>
                <span style="margin-left: 10px;">üåô</span>
            </div>
        </div>
    </nav>

    <header class="hero-section">
        <h1>Lucas GOURMELON - Etudes & Formations</h1>
        <p style="font-size: 1.2rem; margin-top: 1rem; color: #666;">11 ans d‚Äôexp√©rience en BTP & 6 ans en Formation</p>
    </header>

    <section id="profil" class="section">
        <h2 class="section-title">Fiche Profil</h2>
        <div class="profile-grid">
            <div class="profile-text">
                <h3>Qui sommes-nous ?</h3>
                <p>11 ans d‚Äôexp√©rience en qualit√© de projeteur, de Modeleur BIM r√©f√©rent puis de Responsable d‚ÄôAffaires dans 3 entreprises expertes et reconnues dans le domaine du BTP. 6 ans d‚Äôexp√©rience en formations internes, sous-traitants et organismes de formation.</p>
                
                <div class="profile-stats">
                    <div class="stat-card">
                        <span class="stat-number">11+</span>
                        <span>Ann√©es d'exp√©rience</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">6+</span>
                        <span>Ann√©es Formation</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">3</span>
                        <span>Entreprises Partenaires</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">3</span>
                        <span>Grands Projets</span>
                    </div>
                </div>
            </div>
            <div class="profile-image">
                <img src="{% static 'core/images/team.jpg' %}" alt="Notre √©quipe">
            </div>
        </div>
    </section>

    <section id="portfolio" class="section">
        <h2 class="section-title">Nos R√©alisations</h2>
        <div class="portfolio-grid">
            <!-- Project 1 -->
            <div class="project-card">
                <img src="{% static 'core/images/projects/project1.jpg' %}" alt="CEA Cadarache">
                <div class="project-info">
                    <h3>CEA Cadarache</h3>
                    <p>B√¢timents d'isolement et bureaux (4400m¬≤). Responsable d'affaires.</p>
                </div>
            </div>
            <!-- Project 2 -->
            <div class="project-card">
                <img src="{% static 'core/images/projects/project2.jpg' %}" alt="Gare Porte Maillot">
                <div class="project-info">
                    <h3>Gare Porte Maillot</h3>
                    <p>Gare RER E souterraine. Projeteur r√©f√©rent BIM.</p>
                </div>
            </div>
            <!-- Project 3 -->
            <div class="project-card">
                <div style="width:100%; height:250px; background-color:#ddd; display:flex; align-items:center; justify-content:center;">
                    <span style="color:#888;">Cap-Vert</span>
                </div>
                <div class="project-info">
                    <h3>Usines de d√©salinisation</h3>
                    <p>Cap-Vert. Projeteur principal (SADE).</p>
                </div>
            </div>
        </div>
    </section>

    <section id="services" class="section" style="background-color: var(--section-bg-alt); border-radius: 20px; margin-bottom: 4rem; transition: background-color 0.3s;">
        <h2 class="section-title">Nos Services</h2>
        <p style="text-align: center; max-width: 600px; margin: 0 auto;">Choisissez ci-dessous pour planifier une formation ou organiser le suivi de livrables projet.</p>
        
        <div class="action-buttons">
            <a href="{% url 'formation' %}" class="btn-service">Formation</a>
            <a href="{% url 'livrables' %}" class="btn-service">Livrables</a>
        </div>
    </section>

    <footer style="text-align: center; padding: 2rem; background-color: var(--primary-color); color: white;">
        <p>&copy; 2026 Gourmelon BTP. Tous droits r√©serv√©s.</p>
        <p style="margin-top: 10px; font-size: 0.9rem;">
            Email: <a href="mailto:gourmelon.btp@gmail.com" style="color: white; text-decoration: underline;">gourmelon.btp@gmail.com</a> | 
            Tel: 06.16.47.28.32
        </p>
    </footer>
    </div> <!-- Close main-content wrapper -->

    <script>
        // Dark Mode Toggle Logic
        const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
        const currentTheme = localStorage.getItem('theme');

        if (currentTheme) {
            document.documentElement.setAttribute('data-theme', currentTheme);
            if (currentTheme === 'dark') {
                toggleSwitch.checked = true;
            }
        }

        function switchTheme(e) {
            if (e.target.checked) {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
            }    
        }

        toggleSwitch.addEventListener('change', switchTheme);

        // Landing Page Orchestration
        const landingPage = document.getElementById('landing-page');
        const logo = document.getElementById('logo-image');
        const welcomeText = landingPage.querySelector('.welcome-text');
        const loadingScreen = document.getElementById('loading-screen');
        const mainContent = document.getElementById('main-content');
        const body = document.body;

        // Check if user has already seen the intro in this session
        const hasSeenIntro = sessionStorage.getItem('introShown');

        if (hasSeenIntro) {
            // User has seen intro: Skip animation, show content immediately
            landingPage.style.display = 'none';
            loadingScreen.style.display = 'none';
            mainContent.style.display = 'block';
            body.style.overflow = 'auto';
        } else {
            // User hasn't seen intro: Setup initial state (implicitly hidden via CSS/HTML) & Animation
            body.style.overflow = 'hidden';

            landingPage.addEventListener('click', () => {
                // 1. Camera Zoom INTO Logo Effect
                logo.classList.add('zoom-effect');
                landingPage.classList.add('landing-fade');
                
                // Fade out welcome text quickly
                welcomeText.style.transition = 'opacity 0.3s ease';
                welcomeText.style.opacity = '0';
    
                // 2. Wait for zoom animation to complete (1.5s)
                setTimeout(() => {
                    // Switch to Loading Screen
                    landingPage.style.display = 'none';
                    loadingScreen.style.display = 'flex'; 
                    
                    // Fade in loader
                    setTimeout(() => {
                        loadingScreen.classList.add('visible');
                    }, 50);
    
                    // 3. Loading Time then Reveal Main Content
                    setTimeout(() => {
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                            // Show main content and restore scrolling
                            mainContent.style.display = 'block';
                            body.style.overflow = 'auto';
                            
                            // Mark intro as shown for this session
                            sessionStorage.setItem('introShown', 'true');
                        }, 500); // Wait for fade out
                    }, 2000); // 2 seconds loading time
    
                }, 1500); // Match CSS animation duration
            });
        }
    </script>
</html>
