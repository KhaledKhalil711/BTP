{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTP - Welcome</title>
    <link rel="stylesheet" href="{% static 'core/css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="landing-container" id="landing-container">
        <div class="content" id="landing-content">
            <img src="{% static 'core/images/logo.jpg' %}" alt="BTP Logo" class="logo" id="main-logo">
            <h1 class="welcome-text">Welcome to BTP</h1>
            <div class="sub-text" id="enter-btn">ENTER EXPERIENCE</div>
        </div>
    </div>

    <div class="loading-screen" id="loading-screen">
        <div class="pyramid-loader">
            <div class="wrapper">
                <span class="side side1"></span>
                <span class="side side2"></span>
                <span class="side side3"></span>
                <span class="side side4"></span>
                <span class="shadow"></span>
            </div>
        </div>
        <p style="margin-top: 2rem; font-size: 1.2rem; letter-spacing: 2px;">LOADING...</p>
    </div>

    <script>
        document.getElementById('enter-btn').addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent bubbling if container also has click
            triggerAnimation();
        });
        
        // Also allow clicking the logo
        document.getElementById('main-logo').addEventListener('click', function(e) {
             e.stopPropagation();
             triggerAnimation();
        });

        function triggerAnimation() {
            const logo = document.getElementById('main-logo');
            const container = document.getElementById('landing-container');
            const content = document.getElementById('landing-content');
            
            // 1. Hide text first
            document.querySelector('.welcome-text').style.opacity = '0';
            document.querySelector('.sub-text').style.opacity = '0';
            document.querySelector('.welcome-text').style.transition = 'opacity 0.3s';
            document.querySelector('.sub-text').style.transition = 'opacity 0.3s';

            // 2. Start Zoom
            setTimeout(() => {
                logo.classList.add('zoom-effect');
            }, 300);

            // 3. Show Loader and Redirect
            setTimeout(() => {
                const loader = document.getElementById('loading-screen');
                loader.style.display = 'flex';
                
                // Allow a small reflow before adding opacity for fade-in effect
                requestAnimationFrame(() => {
                    loader.classList.add('visible');
                    container.style.display = 'none'; // Completely hide landing
                });
                
                // 4. Redirect after loader has shown for a bit
                setTimeout(() => {
                    window.location.href = "{% url 'index' %}";
                }, 2500);
            }, 1200); // Wait for zoom to progress
        }
    </script>
</body>
</html>
